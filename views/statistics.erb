<div class="my-16 flex-grow flex flex-col items-center">
  <div class="w-full bg-white dark:bg-slate-800 p-16 text-slate-500 dark:text-slate-300">
    <div class="flex flex-row items">
      <div class="flex-grow">
        <p>Duration: <%= format("%3fs",stats.duration) %></p>
        <p>Total requests: <%= stats.total_requests%></p>
        <p>Rate: <%= stats.rate%> rps</p>
      </div>
      <div>
        <span class="text-amber-700 animate-pulse <%= running ? "" : "invisible" %>">Running</span>
      </div>
    </div>
    <table class="mt-8 w-full overflow-y-scroll table-auto text-slate-500 dark:text-slate-300">
      <thead>
        <tr>
          <th class="text-left">Method</th>
          <th class="text-left">URL</th>
          <th class="text-right">Requests</th>
          <th class="text-right">Avg duration</th>
          <th class="text-right">Min duration</th>
          <th class="text-right">Max duration</th>
        </tr>
      </thead>
      <% stats.each_request do |request_stats| %>
        <tr class="border-b border-dashed hover:border-solid border-slate-700">
          <td class="text-left"><%= request_stats[:method] %></td>
          <td class="text-left"><%= request_stats[:url]%></td>
          <td class="text-right"><%= request_stats[:requests]%></td>
          <td class="text-right"><%= format("%8fs", request_stats[:avg_duration]) %></td>
          <td class="text-right"><%= format("%8fs", request_stats[:min_duration]) %></td>
          <td class="text-right"><%= format("%8fs", request_stats[:max_duration]) %></td>
        </tr>
      <% end %>
    </table>
  </div>
  <div class="w-full h-1/5 text-center my-8">
    <a href="/" class="mt-8 bg-slate-500 p-2 shadow-slate-900 shadow-lg rounded hover:bg-slate-600">Back to start</a>
  </div>
</div>
<% if running %>
  <script>
    window.setTimeout(function() {window.location.reload();}, 2000);
  </script>
<% end %>
